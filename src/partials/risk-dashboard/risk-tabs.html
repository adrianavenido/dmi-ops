<div
  x-data="{
    activeTab: 'dashboard',
    showTab(tab) {
      this.activeTab = tab;
    },
    isActive(tab) {
      return this.activeTab === tab;
    }
  }"
  class="space-y-5 sm:space-y-6"
>
  <!-- Tab Navigation -->
  <div class="border-b border-gray-200 dark:border-gray-800">
    <nav class="flex gap-1 -mb-px">
      <button
        @click="showTab('dashboard')"
        :class="isActive('dashboard') ? 'border-brand-500 text-brand-500 dark:text-brand-400' : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300'"
        class="px-4 py-3 text-sm font-medium border-b-2 transition-colors"
      >
        Dashboard
      </button>
      <button
        @click="showTab('register')"
        :class="isActive('register') ? 'border-brand-500 text-brand-500 dark:text-brand-400' : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300'"
        class="px-4 py-3 text-sm font-medium border-b-2 transition-colors"
      >
        Risk Register
      </button>
      <button
        @click="showTab('heatmap')"
        :class="isActive('heatmap') ? 'border-brand-500 text-brand-500 dark:text-brand-400' : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300'"
        class="px-4 py-3 text-sm font-medium border-b-2 transition-colors"
      >
        Heatmap
      </button>
      <button
        @click="showTab('metrics')"
        :class="isActive('metrics') ? 'border-brand-500 text-brand-500 dark:text-brand-400' : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300'"
        class="px-4 py-3 text-sm font-medium border-b-2 transition-colors"
      >
        Metrics
      </button>
      <button
        @click="showTab('settings')"
        :class="isActive('settings') ? 'border-brand-500 text-brand-500 dark:text-brand-400' : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300'"
        class="px-4 py-3 text-sm font-medium border-b-2 transition-colors"
      >
        Settings
      </button>
    </nav>
  </div>

  <!-- Dashboard Tab -->
  <div x-show="isActive('dashboard')" class="space-y-5 sm:space-y-6">
    <!-- KPI Cards -->
    <div class="grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-4">
      <div class="rounded-2xl border border-gray-200 bg-white p-5 dark:border-gray-800 dark:bg-white/[0.03]">
        <div class="text-sm text-gray-500 dark:text-gray-400">Total Risks</div>
        <div class="mt-1 text-2xl font-bold text-gray-800 dark:text-white/90">64</div>
        <div class="mt-1 text-xs text-gray-500 dark:text-gray-400">All categories</div>
      </div>
      <div class="rounded-2xl border border-gray-200 bg-white p-5 dark:border-gray-800 dark:bg-white/[0.03]">
        <div class="text-sm text-gray-500 dark:text-gray-400">High Risks</div>
        <div class="mt-1 text-2xl font-bold text-red-600 dark:text-red-400">9</div>
        <div class="mt-1 text-xs text-gray-500 dark:text-gray-400">14% of total</div>
      </div>
      <div class="rounded-2xl border border-gray-200 bg-white p-5 dark:border-gray-800 dark:bg-white/[0.03]">
        <div class="text-sm text-gray-500 dark:text-gray-400">Mitigations in Progress</div>
        <div class="mt-1 text-2xl font-bold text-amber-600 dark:text-amber-400">23</div>
        <div class="mt-1 text-xs text-gray-500 dark:text-gray-400">Under review</div>
      </div>
      <div class="rounded-2xl border border-gray-200 bg-white p-5 dark:border-gray-800 dark:bg-white/[0.03]">
        <div class="text-sm text-gray-500 dark:text-gray-400">Closed / Resolved</div>
        <div class="mt-1 text-2xl font-bold text-green-600 dark:text-green-400">18</div>
        <div class="mt-1 text-xs text-gray-500 dark:text-gray-400">Successfully mitigated</div>
      </div>
    </div>

    <!-- Charts -->
    <div class="grid grid-cols-1 gap-5 lg:grid-cols-2">
      <div class="rounded-2xl border border-gray-200 bg-white p-5 dark:border-gray-800 dark:bg-white/[0.03] sm:p-6">
        <h3 class="mb-4 text-base font-semibold text-gray-800 dark:text-white/90">Risk Levels Distribution</h3>
        <div id="riskLevelChart" style="height: 260px;"></div>
      </div>
      <div class="rounded-2xl border border-gray-200 bg-white p-5 dark:border-gray-800 dark:bg-white/[0.03] sm:p-6">
        <h3 class="mb-4 text-base font-semibold text-gray-800 dark:text-white/90">Risks by Category</h3>
        <div id="categoryChart" style="height: 260px;"></div>
      </div>
    </div>
  </div>

  <!-- Risk Register Tab -->
  <div x-show="isActive('register')" class="space-y-5 sm:space-y-6">
    <include src="../table/risk-register-table.html" />
  </div>

  <!-- Heatmap Tab -->
  <div x-show="isActive('heatmap')" class="space-y-5 sm:space-y-6">
    <div class="rounded-2xl border border-gray-200 bg-white p-5 dark:border-gray-800 dark:bg-white/[0.03] sm:p-6">
      <h3 class="mb-4 text-base font-semibold text-gray-800 dark:text-white/90">Risk Heatmap</h3>
      <div id="heatmapChart" style="height: 400px;"></div>
    </div>
  </div>

  <!-- Metrics Tab -->
  <div x-show="isActive('metrics')" class="space-y-5 sm:space-y-6">
    <div class="grid grid-cols-1 gap-4 sm:grid-cols-3">
      <div class="rounded-2xl border border-gray-200 bg-white p-5 dark:border-gray-800 dark:bg-white/[0.03]">
        <div class="text-sm text-gray-500 dark:text-gray-400">Average Risk Score</div>
        <div class="mt-1 text-2xl font-bold text-gray-800 dark:text-white/90">6.4 / 10</div>
        <div class="mt-1 text-xs text-gray-500 dark:text-gray-400">Weighted by likelihood Ã— impact</div>
      </div>
      <div class="rounded-2xl border border-gray-200 bg-white p-5 dark:border-gray-800 dark:bg-white/[0.03]">
        <div class="text-sm text-gray-500 dark:text-gray-400">Risks Reviewed This Quarter</div>
        <div class="mt-1 text-2xl font-bold text-gray-800 dark:text-white/90">31</div>
        <div class="mt-1 text-xs text-gray-500 dark:text-gray-400">Out of 64 total</div>
      </div>
      <div class="rounded-2xl border border-gray-200 bg-white p-5 dark:border-gray-800 dark:bg-white/[0.03]">
        <div class="text-sm text-gray-500 dark:text-gray-400">Avg Mitigation Effectiveness</div>
        <div class="mt-1 text-2xl font-bold text-green-600 dark:text-green-400">79%</div>
        <div class="mt-1 text-xs text-gray-500 dark:text-gray-400">Improvement from Q3: +4%</div>
      </div>
    </div>

    <div class="rounded-2xl border border-gray-200 bg-white p-5 dark:border-gray-800 dark:bg-white/[0.03] sm:p-6">
      <h3 class="mb-4 text-base font-semibold text-gray-800 dark:text-white/90">Quarterly Risk Trend</h3>
      <div id="trendChart" style="height: 260px;"></div>
    </div>
  </div>

  <!-- Settings Tab -->
  <div x-show="isActive('settings')" class="space-y-5 sm:space-y-6">
    <div class="rounded-2xl border border-gray-200 bg-white p-5 dark:border-gray-800 dark:bg-white/[0.03] sm:p-6">
      <h3 class="mb-4 text-base font-semibold text-gray-800 dark:text-white/90">Configuration</h3>
      <p class="mb-3 text-sm text-gray-600 dark:text-gray-400">Simulated configuration panel (to be connected to Google Sheet):</p>
      <ul class="mb-6 ml-5 list-disc space-y-2 text-sm text-gray-700 dark:text-gray-300">
        <li>Risk Categories: Strategic, Operational, Compliance, Financial, IT, HR</li>
        <li>Review Frequency: Monthly, Quarterly, Annual</li>
        <li>Risk Owners loaded from user directory</li>
        <li>Heatmap and trend chart auto-refresh every 24h</li>
      </ul>

      <!-- Example Risk Register Table -->
      <div class="mt-6">
        <h4 class="mb-4 text-sm font-semibold text-gray-800 dark:text-white/90">Example Risk Register Data Structure</h4>
        <div class="overflow-x-auto rounded-lg border border-gray-200 dark:border-gray-800">
          <table class="min-w-full text-sm">
            <thead class="bg-gray-50 dark:bg-gray-800">
              <tr>
                <th class="px-4 py-3 text-left text-xs font-medium uppercase text-gray-500 dark:text-gray-400">Risk ID</th>
                <th class="px-4 py-3 text-left text-xs font-medium uppercase text-gray-500 dark:text-gray-400">Category</th>
                <th class="px-4 py-3 text-left text-xs font-medium uppercase text-gray-500 dark:text-gray-400">Description</th>
                <th class="px-4 py-3 text-left text-xs font-medium uppercase text-gray-500 dark:text-gray-400">Likelihood</th>
                <th class="px-4 py-3 text-left text-xs font-medium uppercase text-gray-500 dark:text-gray-400">Impact</th>
                <th class="px-4 py-3 text-left text-xs font-medium uppercase text-gray-500 dark:text-gray-400">Level</th>
                <th class="px-4 py-3 text-left text-xs font-medium uppercase text-gray-500 dark:text-gray-400">Owner</th>
                <th class="px-4 py-3 text-left text-xs font-medium uppercase text-gray-500 dark:text-gray-400">Status</th>
                <th class="px-4 py-3 text-left text-xs font-medium uppercase text-gray-500 dark:text-gray-400">Next Review</th>
              </tr>
            </thead>
            <tbody class="divide-y divide-gray-100 dark:divide-gray-800">
              <tr>
                <td class="px-4 py-3 text-gray-800 dark:text-white/90">R-001</td>
                <td class="px-4 py-3 text-gray-500 dark:text-gray-400">Strategic</td>
                <td class="px-4 py-3 text-gray-800 dark:text-white/90">Failure to meet funding targets</td>
                <td class="px-4 py-3 text-gray-500 dark:text-gray-400">High</td>
                <td class="px-4 py-3 text-gray-500 dark:text-gray-400">High</td>
                <td class="px-4 py-3">
                  <span class="inline-flex rounded-full bg-red-50 px-2.5 py-0.5 text-xs font-medium text-red-700 dark:bg-red-500/15 dark:text-red-400">High</span>
                </td>
                <td class="px-4 py-3 text-gray-500 dark:text-gray-400">CEO</td>
                <td class="px-4 py-3 text-gray-500 dark:text-gray-400">Mitigation in progress</td>
                <td class="px-4 py-3 text-gray-500 dark:text-gray-400">2025-12-15</td>
              </tr>
              <tr>
                <td class="px-4 py-3 text-gray-800 dark:text-white/90">R-012</td>
                <td class="px-4 py-3 text-gray-500 dark:text-gray-400">Operational</td>
                <td class="px-4 py-3 text-gray-800 dark:text-white/90">Key system downtime exceeding SLA</td>
                <td class="px-4 py-3 text-gray-500 dark:text-gray-400">Medium</td>
                <td class="px-4 py-3 text-gray-500 dark:text-gray-400">High</td>
                <td class="px-4 py-3">
                  <span class="inline-flex rounded-full bg-amber-50 px-2.5 py-0.5 text-xs font-medium text-amber-700 dark:bg-amber-500/15 dark:text-amber-400">Medium</span>
                </td>
                <td class="px-4 py-3 text-gray-500 dark:text-gray-400">IT Manager</td>
                <td class="px-4 py-3 text-gray-500 dark:text-gray-400">Ongoing</td>
                <td class="px-4 py-3 text-gray-500 dark:text-gray-400">2025-11-01</td>
              </tr>
              <tr>
                <td class="px-4 py-3 text-gray-800 dark:text-white/90">R-034</td>
                <td class="px-4 py-3 text-gray-500 dark:text-gray-400">Compliance</td>
                <td class="px-4 py-3 text-gray-800 dark:text-white/90">Non-compliance with data privacy law</td>
                <td class="px-4 py-3 text-gray-500 dark:text-gray-400">Low</td>
                <td class="px-4 py-3 text-gray-500 dark:text-gray-400">High</td>
                <td class="px-4 py-3">
                  <span class="inline-flex rounded-full bg-amber-50 px-2.5 py-0.5 text-xs font-medium text-amber-700 dark:bg-amber-500/15 dark:text-amber-400">Medium</span>
                </td>
                <td class="px-4 py-3 text-gray-500 dark:text-gray-400">Legal Officer</td>
                <td class="px-4 py-3 text-gray-500 dark:text-gray-400">Closed</td>
                <td class="px-4 py-3 text-gray-500 dark:text-gray-400">2025-10-01</td>
              </tr>
              <tr>
                <td class="px-4 py-3 text-gray-800 dark:text-white/90">R-046</td>
                <td class="px-4 py-3 text-gray-500 dark:text-gray-400">Financial</td>
                <td class="px-4 py-3 text-gray-800 dark:text-white/90">Budget overspend for Q3 projects</td>
                <td class="px-4 py-3 text-gray-500 dark:text-gray-400">High</td>
                <td class="px-4 py-3 text-gray-500 dark:text-gray-400">Medium</td>
                <td class="px-4 py-3">
                  <span class="inline-flex rounded-full bg-amber-50 px-2.5 py-0.5 text-xs font-medium text-amber-700 dark:bg-amber-500/15 dark:text-amber-400">Medium</span>
                </td>
                <td class="px-4 py-3 text-gray-500 dark:text-gray-400">Finance Director</td>
                <td class="px-4 py-3 text-gray-500 dark:text-gray-400">Review scheduled</td>
                <td class="px-4 py-3 text-gray-500 dark:text-gray-400">2025-12-31</td>
              </tr>
            </tbody>
          </table>
        </div>
        <p class="mt-4 text-xs text-gray-500 dark:text-gray-400">
          This is an example of the risk register data structure. The actual risk register table with full CRUD functionality is available in the "Risk Register" tab.
        </p>
      </div>
    </div>
  </div>
</div>

